#!/bin/bash
# This script configures a new Ubuntu machine to include a custom HTTP response header

# Update and install Nginx
sudo apt-get update
sudo apt-get -y install nginx

# Add the custom header to Nginx configuration
sudo sed -i '/server {/a \\tadd_header X-Served-By $hostname;' /etc/nginx/sites-available/default
#!/bin/bash

# Update package lists and install Nginx
sudo apt-get update
sudo apt-get install -y nginx

# Retrieve the server's hostname
HOSTNAME=$(persistent-hostname)

# Configure Nginx to add the custom header with the server's hostname
sudo bash -c "cat > /etc/nginx/conf.d/custom_header.conf <<EOF
server {
    listen 80 default_server;
    server_name _;
    location / {
        add_header X-Served-By \"$HOSTNAME\";
        proxy_pass http://localhost;
    }
}
EOF"

# Test Nginx configuration and reload if successful
sudo nginx -t && sudo systemctl reload nginx
